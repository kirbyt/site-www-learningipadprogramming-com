
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">

<title>Learning iPad Programming |How To Ignore performSelector Leak Warning</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index, follow" />

<link rel="stylesheet" type="text/css" href="/styles/inspire/style.css" media="screen" />
<link rel="stylesheet" type="text/css" media="all" href="/styles/inspire/css/effects.css" />
<link rel="stylesheet" type="text/css" media="all" href="/styles/inspire/css/prettyPhoto.css" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed/index.html" />
<link href='http://fonts.googleapis.com/css?family=Droid+Sans%7CDroid+Serif:italic' rel='stylesheet' type='text/css' />
      
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type='text/javascript' src='/styles/inspire/includes/js/superfish-ver=3.3.2.js'></script>
<script type='text/javascript' src='/styles/inspire/includes/js/woofader-ver=3.3.2.js'></script>
<script type='text/javascript' src='/styles/inspire/includes/js/general-ver=3.3.2.js'></script>
<script type='text/javascript' src='/styles/inspire/includes/js/jquery.prettyPhoto-ver=3.3.2.js'></script>
<!-- Theme version -->
<meta name="generator" content="Inspire 2.4.1" />
<meta name="generator" content="WooFramework 5.3.12" />

<!-- Alt Stylesheet -->
<link href="/styles/inspire/styles/default.css" rel="stylesheet" type="text/css" />
<!-- Options Panel Custom CSS -->
<style type="text/css">
#logo img { display:none; } .site-title { display:block!important; }
.site-description { display:block!important; }
</style>


<!-- Woo Shortcodes CSS -->
<link href="/styles/inspire/functions/css/shortcodes.css" rel="stylesheet" type="text/css" />

<!-- Custom Stylesheet -->
<link href="/styles/inspire/custom.css" rel="stylesheet" type="text/css" />

<!--[if IE 6]>
<script type="text/javascript" src="/styles/inspire/includes/js/pngfix.js"></script>
<script type="text/javascript" src="/styles/inspire/includes/js/menu.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="/styles/inspire/css/ie6.css" />
<![endif]-->	

<!--[if IE 7]>
<link rel="stylesheet" type="text/css" media="all" href="/styles/inspire/css/ie7.css" />
<![endif]-->

<!--[if IE 8]>
<link rel="stylesheet" type="text/css" media="all" href="/styles/inspire/css/ie8.css" />
<![endif]-->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
<!-- Woo Custom Styling -->
<style type="text/css">
#top {background-repeat:no-repeat}
</style>

<!--[if lte IE 7]>
<script type="text/javascript">
jQuery(function() {
	var zIndexNumber = 1000;
	jQuery('div').each(function() {
		jQuery(this).css('zIndex', zIndexNumber);
		zIndexNumber -= 10;
	});
});
</script>
<![endif]-->

</head>

<body class="home blog unknown">

<div id="wrapper">
	<div id="top">
        <div id="header">
            <div class="col-full">
                <div id="logo" class="fl">
                    <h1 class="site-title"><a href="/index.html">Learning iPad Programming</a></h1>
                    <span class="site-description">A Hands-on Guide to Building Apps for the iPad</span>
                </div><!-- /#logo -->

                <ul id="nav" class="fr">
                    <li id="menu-item-43" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-43"><a href="/about/index.html">About</a></li>
                    <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="/book/index.html">Book</a></li>
                    <li id="menu-item-199" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-199"><a href="/source-code/index.html">Source Code</a></li>
                    <li id="menu-item-207" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-207"><a href="/errata/index.html">Errata</a></li>
                    <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="/blog/index.html">Blog</a></li>
                </ul>               
            </div><!-- /.col-full -->
        </div><!-- /#header -->
	</div><!-- /#top -->

    <div id="content">
    	<div class="col-full">  
            <!-- #main Starts -->
<div id="main" class="col-left">      
    <!-- Post Starts -->
    <div class="post-405 post type-post status-publish format-standard hentry category-general category-objective-c">
        <h2 class="title"><a href="" rel="bookmark" title="">How To Ignore performSelector Leak Warning</a></h2>

        <p class="post-meta">
            <span class="small">by</span> <span class="post-author">kirbyt</span>
            <span class="small">on</span> <span class="post-date">April 03, 2012</span>
            <span class="small">in</span> <span class="post-category"><a class='category' href='/category/ios/'>ios</a>, <a class='category' href='/category/learn-ipad-book/'>learn-ipad-book</a>, <a class='category' href='/category/photowheel/'>photowheel</a></span>
        </p>

        <div class="entry">
            <p>In Listing 16.22 from the Learning iPad Programming book, I show how to invoke a method using -performSelector: where the selector is determined at runtime from a set of names stored in an NSArray. The implementation in Listing 16.22 could have been done a number of different ways, but I chose this approach to show how to set and perform a selector at runtime. However, the code produces a compiler warning message when ARC is used.</p>

<p>Because ARC is used and the selector is determined at run, the compiler generates a &#8220;possible memory leak&#8221; warning message. This warning is legitimate given that the selector is unknown at compile time and ARC is being used to manage memory.</p>

<p>At the time the code in Listing 16.22 was written, there was no way to ignore this warning message. That can be a good thing since explicitly ignoring a warning message from the compiler can be a bad thing. 99.9% of the time you want to fix or refactor your code so the warning message goes away. However, there are times when you know more than the compiler does, and the code in Listing 16.22 is one of those rare times.</p>

<p>In this particular case, each selector that can potentially be called will not cause a memory leak because each one returns a void. The compiler doesn&#8217;t know this, but you (as the programmer) know this to be true. So this warning message can safely be ignored. But how do you tell the compiler to ignore the -performSelector possible memory leak warning so you don&#8217;t have to see the warning message each time you compile the project?</p>

<p>You can use tell clang to ignore the -performSelector leak warning by wrapping the -performSelector: call with a set of #pragma statements that temporarily ignore the warning for the code included in the block. Here is an example:</p>

<p><span>objc</span></p>

<h1 id='pragma_clang_diagnostic_push'>pragma clang diagnostic push</h1>

<h1 id='pragma_clang_diagnostic_ignored_warcperformselectorleaks'>pragma clang diagnostic ignored &#34;-Warc-performSelector-leaks&#34;</h1>

<p><span>self performSelector:selector</span>;</p>

<h1 id='pragma_clang_diagnostic_pop'>pragma clang diagnostic pop</h1>

<p><span>/objc</span></p>

<p>So the code causing the warning message in Listing 16.22 for the PhotoWheel app now looks like this:</p>

<p><span>objc highlight=&#8221;22,23-25&#8221;</span> - (void)actionSheet:(UIActionSheet <em>)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex { // Do nothing if the user taps outside the action // sheet (thus closing the popover containing the // action sheet). if (buttonIndex &#60; 0) { return; }</em></p>

<p>NSMutableArray <em>names = <span><span>NSMutableArray alloc</span> init</span>;</em></p>

<p>if (<span>actionSheet tag</span> == 0) { <span>names addObject:@&#34;confirmDeletePhotoAlbum&#34;</span>;</p>

<p>} else { BOOL hasCamera = <span>UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera</span>; if (hasCamera) <span>names addObject:@&#34;presentCamera&#34;</span>; <span>names addObject:@&#34;presentPhotoLibrary&#34;</span>; }</p>

<p>SEL selector = NSSelectorFromString(<span>names objectAtIndex:buttonIndex</span>);</p>

<h1 id='pragma_clang_diagnostic_push'>pragma clang diagnostic push</h1>

<h1 id='pragma_clang_diagnostic_ignored_warcperformselectorleaks'>pragma clang diagnostic ignored &#34;-Warc-performSelector-leaks&#34;</h1>

<p><span>self performSelector:selector</span>;</p>

<h1 id='pragma_clang_diagnostic_pop'>pragma clang diagnostic pop</h1>

<p>} <span>/objc</span></p>
        </div>

    </div><!-- /.post -->
    <!--- Post Ends -->

</div><!-- /#main -->

<div id="sidebar" class="col-right">
    <div class="primary">
		<div id="woo_news-3" class="widget widget_woo_news">
			<h3>Latest</h3>
            <a class="rss" href="/atom.xml" title="Subscribe to our RSS feed"><img src="/styles/inspire/images/ico-rss-big.png" alt="RSS"/></a>
				
			<div>
                
			    <div class="item">
                    	<a class="title" href="/2012/07/26/class-declaration-versus-class-definition/" title="Class Declaration versus Class Definition">Class Declaration versus Class Definition</a>
                        <p class="post-meta">
                            <span class="small">by</span> <span class="post-author"><a href="author/kirbyt/index.html" title="Posts by kirbyt" rel="author">kirbyt</a></span>
                            <span class="small">on</span> <span class="post-date">July 26, 2012</span>
                            <span class="small">in</span> <span class="post-category"><a href="category/general/index.html" title="View all posts in general" rel="category tag">general</a>, <a href="category/objective-c/index.html" title="View all posts in objective-c" rel="category tag">objective-c</a></span>
                        </p>
                        <p>A reader sent me an outstanding question. He pointed out that in chapter 4 of Learning iPad Programming, I wrote: &#8220;To define a class you ...</p>
                </div>
                
			    <div class="item">
                    	<a class="title" href="/2012/06/19/using-xcode-code-snippets/" title="Using Xcode Code Snippets">Using Xcode Code Snippets</a>
                        <p class="post-meta">
                            <span class="small">by</span> <span class="post-author"><a href="author/kirbyt/index.html" title="Posts by kirbyt" rel="author">kirbyt</a></span>
                            <span class="small">on</span> <span class="post-date">July 26, 2012</span>
                            <span class="small">in</span> <span class="post-category"><a href="category/general/index.html" title="View all posts in general" rel="category tag">general</a>, <a href="category/objective-c/index.html" title="View all posts in objective-c" rel="category tag">objective-c</a></span>
                        </p>
                        <p>A reader sent me an outstanding question. He pointed out that in chapter 4 of Learning iPad Programming, I wrote: &#8220;To define a class you ...</p>
                </div>
                
			    <div class="item">
                    	<a class="title" href="/2012/06/06/my-appsterdam-visit/" title="My Appsterdam Visit">My Appsterdam Visit</a>
                        <p class="post-meta">
                            <span class="small">by</span> <span class="post-author"><a href="author/kirbyt/index.html" title="Posts by kirbyt" rel="author">kirbyt</a></span>
                            <span class="small">on</span> <span class="post-date">July 26, 2012</span>
                            <span class="small">in</span> <span class="post-category"><a href="category/general/index.html" title="View all posts in general" rel="category tag">general</a>, <a href="category/objective-c/index.html" title="View all posts in objective-c" rel="category tag">objective-c</a></span>
                        </p>
                        <p>A reader sent me an outstanding question. He pointed out that in chapter 4 of Learning iPad Programming, I wrote: &#8220;To define a class you ...</p>
                </div>
                
			    <div class="item">
                    	<a class="title" href="/2012/04/03/how-to-ignore-performselector-leak-warning/" title="How To Ignore performSelector Leak Warning">How To Ignore performSelector Leak Warning</a>
                        <p class="post-meta">
                            <span class="small">by</span> <span class="post-author"><a href="author/kirbyt/index.html" title="Posts by kirbyt" rel="author">kirbyt</a></span>
                            <span class="small">on</span> <span class="post-date">July 26, 2012</span>
                            <span class="small">in</span> <span class="post-category"><a href="category/general/index.html" title="View all posts in general" rel="category tag">general</a>, <a href="category/objective-c/index.html" title="View all posts in objective-c" rel="category tag">objective-c</a></span>
                        </p>
                        <p>A reader sent me an outstanding question. He pointed out that in chapter 4 of Learning iPad Programming, I wrote: &#8220;To define a class you ...</p>
                </div>
                
			    <div class="item">
                    	<a class="title" href="/2012/03/24/using-xcode-4-2-on-snow-leopard/" title="Using Xcode 4.2 on Snow Leopard">Using Xcode 4.2 on Snow Leopard</a>
                        <p class="post-meta">
                            <span class="small">by</span> <span class="post-author"><a href="author/kirbyt/index.html" title="Posts by kirbyt" rel="author">kirbyt</a></span>
                            <span class="small">on</span> <span class="post-date">July 26, 2012</span>
                            <span class="small">in</span> <span class="post-category"><a href="category/general/index.html" title="View all posts in general" rel="category tag">general</a>, <a href="category/objective-c/index.html" title="View all posts in objective-c" rel="category tag">objective-c</a></span>
                        </p>
                        <p>A reader sent me an outstanding question. He pointed out that in chapter 4 of Learning iPad Programming, I wrote: &#8220;To define a class you ...</p>
                </div>
                
				    
				    
            </div>
			
    	</div>   
   		           
    </div>        
	
</div><!-- /#sidebar -->		           

    	</div><!-- /#col-full -->
    </div><!-- /#content -->
	
	<div id="footer-widgets">
    	<div class="col-full">
            <div class="left block">
                <div id="archives-4" class="widget widget_archive"><h3>Archives</h3>		
                    <ul>
                        <li><a href="/blog/archives">The Complete Blog Archives</a></li>
		            </ul>
                </div>
                <div id="categories-3" class="widget widget_categories"><h3>Categories</h3>		
                    <ul>
            		</ul>
                </div>    
            </div>
            <div class="right block">
                <div id="linkcat-2" class="widget widget_links"><h3>Blogroll</h3>
                    <ul class='xoxo blogroll'>
                        <li><a href="http://www.cimgf.com/">Cocoa Is My Girlfriend</a></li>
                        <li><a href="http://cocoawithlove.com/">Cocoa with Love</a></li>
                        <li><a href="http://iphonedevelopment.blogspot.com/">iPhone Development with Jeff LaMarche</a></li>
                        <li><a href="http://mattgemmell.com/">Matt Legend Gemmell</a></li>
                        <li><a href="http://blog.whitepeaksoftware.com/">White Peak Software Blog</a></li>
                    </ul>
                </div>

            </div>
            <div class="fix"></div>

		</div><!-- /.col-full  -->
	</div><!-- /#footer-widgets  -->
    
	<div id="footer">
    	<div class="col-full">

            <div id="copyright" class="col-left">
                <p>&copy; 2011-2013 Learning iPad Programming. All Rights Reserved.</p>
            </div>
        
            <div id="credit" class="col-right">
                <p>Designed by <a href="http://www.woothemes.com"><img src="/styles/inspire/images/woothemes.png" width="87" height="21" alt="Woo Themes" /></a></p>
            </div>
	
		</div><!-- /.col-full  -->
	</div><!-- /#footer  -->

</div><!-- /#wrapper -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-167605-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
